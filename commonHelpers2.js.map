{"version":3,"file":"commonHelpers2.js","sources":["../src/js/favorites.js","../src/images/favorites/dumbbell.png","../src/js/exercise-card.js"],"sourcesContent":["import { checkDate } from './quote';\nimport { mobileMenu, showCurrentPageFavorites } from './header-modal';\n\n\nconst pageLinks = document.querySelector('.favorites-page');\nconst headerEl = document.querySelector('.header-section');\nheaderEl.classList.add('header-section-favorites')\npageLinks.classList.add('active-page');\n\n\nshowCurrentPageFavorites();\nmobileMenu();\ncheckDate();","export default \"__VITE_ASSET__bfce6746__\"","import EnergyFlowApiSevice from './api-service';\nimport imgUrl from '../images/sprite.svg';\nimport { renderExerciseModal } from './renderExerciseModal';\nimport { showMessageBadRequest } from './showMessage';\nimport { renderPageList } from './pagination';\nimport { cutString } from './render-exercises';\nimport { addListenersToRatingModal } from './giveRating';\nimport dumbbellImg from '../images/favorites/dumbbell.png';\n\naddListenersToRatingModal();\n\nconst exercisesCardList = document.querySelector('.favorites-list');\nconst listWithoutExercases = `<div class=\"favorites-no-results\"><img\n          class=\"favorites-div-without-cards-img\"\n          src=\"${dumbbellImg}\"\n          alt=\"dumbbell\"\n          width=\"85\"\n          height=\"52\"\n        />\n        <p class=\"favorites-div-without-cards-text\">\n          It appears that you haven't added any exercises to your favorites yet.\n          To get started, you can add exercises that you like to your favorites\n          for easier access in the future.\n        </p></div>`;\n\nconst LOCAL_STORAGE_KEY = 'favoriteExerciseIds';\nconst energyFlowApiService = new EnergyFlowApiSevice();\nlet totalFavoritesPages = 1;\nlet currentPage = 1;\n\nfunction addCardToList(results) {\n  const cardElement = results\n    .map(\n      cardData => `\n    <div class=\"div-with-li\" id=\"${cardData._id}\">\n    <button type=\"button\" id=\"${cardData._id}\" class=\"card-delete\">\n    <svg class=\"trash-icon\" width=\"16\" height=\"16\">\n    <use href=\"${imgUrl}#icon-trash\"></use></svg>\n  </button>\n      <li class=\"exercises-card\" id=\"${cardData._id}\">\n\n        <div class=\"exercises-card-upper-part\">\n          <div class=\"div-rating-or-delete-button\">\n            <div class=\"workout-text\">WORKOUT</div>\n\n          </div>\n          <button type=\"button\" id=\"${\n            cardData._id\n          }\" class=\"card-start\">Start <span>\n            <svg class=\"start-icon\" width=\"14\" height=\"14\">\n            <use href=\"${imgUrl}#icon-right-arrow\"></use></svg>\n          </span></button>\n        </div>\n        <div class=\"exercises-card-midle-part\">\n          <div class=\"exercises-card-midle-part-svg\">\n            <svg class=\"runing-man-icon\" width=\"24\" height=\"24\">\n            <use href=\"${imgUrl}#icon-runing-man\"></use></svg>\n          </div>\n          <p class=\"card-exercise-name\">${capitalizeFirstLetter(\n            cardData.name\n          )}</p>\n        </div>\n        <div class=\"exercises-card-lower-part\">\n          <p>Burned calories: <span class=\"exercises-card-lower-part-span\">${\n            cardData.burnedCalories\n          } / 3 min</span></p>\n          <p>Body part: <span class=\"exercises-card-lower-part-span\">${\n            cardData.bodyPart\n          }</span></p>\n          <p>Target: <span class=\"exercises-card-lower-part-span\">${cutString(\n            cardData.target\n          )}</span></p>\n        </div>\n      </li>\n      </div>\n  `\n    )\n    .join('');\n\n  exercisesCardList.innerHTML = cardElement;\n}\n\nfunction capitalizeFirstLetter(string) {\n  return string.charAt(0).toUpperCase() + string.slice(1);\n}\n// ----------------open modal---------------------------//\n\nexercisesCardList.addEventListener('click', onOpenFavorite);\n\nasync function onOpenFavorite(e) {\n  if (e.target.classList.contains('trash-icon')) {\n    return;\n  }\n\n  let id = e.target.id;\n\n  await renderExerciseModal(id);\n  document.querySelector('.exercise-favorite-add-btn').remove();\n  document.querySelector('.exercise-rating-give-btn').style.width = '100%';\n}\n\n// --------------delete button-----------------------//\n\nfunction deleteFavoriteCard(e) {\n  if (!e.target.classList.contains('trash-icon')) {\n    return;\n  }\n\n  let id = e.target.parentNode.id;\n\n  let savedIdList = JSON.parse(localStorage.getItem(LOCAL_STORAGE_KEY));\n  let test = savedIdList.filter(e => e !== id);\n  localStorage.setItem(LOCAL_STORAGE_KEY, JSON.stringify(test));\n  totalFavoritesPages = Math.ceil(test.length / 8);\n  updateInterfaceAfterRemoval(id);\n\n  if (\n    document.querySelectorAll('.div-with-li').length === 0 &&\n    JSON.parse(localStorage.getItem(LOCAL_STORAGE_KEY)).length > 0\n  ) {\n    fetchDataForIds(test).then(results => {\n      if (window.innerWidth < 768) {\n        currentPage = currentPage - 1;\n        addCardToList(results.slice(0, 8));\n        renderPageList(totalFavoritesPages, currentPage, currentPage);\n        console.log(currentPage);\n        let pageList = document.querySelectorAll(\n          '.exercises-navigation-number'\n        );\n\n        pageList[currentPage - 1].classList.add('pagination-current');\n        return;\n      }\n    });\n  }\n}\n\nfunction updateInterfaceAfterRemoval(exerciseIdToRemove) {\n  const cardToRemove = document.querySelector(\n    `.div-with-li[id=\"${exerciseIdToRemove}\"]`\n  );\n\n  if (cardToRemove) {\n    cardToRemove.remove();\n  }\n\n  if (JSON.parse(localStorage.getItem(LOCAL_STORAGE_KEY)).length === 0) {\n    exercisesCardList.innerHTML = listWithoutExercases;\n    document.querySelector('.exercises-navigation-list').innerHTML = '';\n    return;\n  }\n}\nexercisesCardList.addEventListener('click', deleteFavoriteCard);\n//--------------------- add to favorites---------------------------\n\nfunction getFavoriteExerciseIds() {\n  const storedIds = localStorage.getItem(LOCAL_STORAGE_KEY);\n  return storedIds ? JSON.parse(storedIds) : [];\n}\n\n// -------------------------Завантаження з улюблених-----------------------------------\nconst favoriteExerciseIdInLocalStorage = getFavoriteExerciseIds();\n\nconst fetchDataForIds = async ids => {\n  const promises = ids.map(id => energyFlowApiService.getExerciseInfoById(id));\n  return Promise.all(promises);\n};\n\nif (favoriteExerciseIdInLocalStorage.length !== 0) {\n  fetchDataForIds(favoriteExerciseIdInLocalStorage)\n    .then(results => {\n      if (window.innerWidth < 768) {\n        addCardToList(results.slice(0, 8));\n\n        totalFavoritesPages = Math.ceil(results.length / 8);\n        // console.log(totalFavoritesPages);\n        renderPageList(totalFavoritesPages, currentPage, currentPage);\n        document\n          .querySelector('.navigation-list-form')\n          .addEventListener('submit', paginationFavorite);\n      } else {\n        addCardToList(results);\n      }\n    })\n    .catch(error => {\n      showMessageBadRequest();\n      console.log(error);\n    });\n} else {\n  exercisesCardList.innerHTML = listWithoutExercases;\n}\n\nfunction paginationFavorite(e) {\n  e.preventDefault();\n\n  currentPage = e.submitter.textContent;\n  const ids = JSON.parse(localStorage.getItem('favoriteExerciseIds'));\n  let total = Math.ceil(ids.length / 8);\n\n  fetchDataForIds(favoriteExerciseIdInLocalStorage)\n    .then(results => {\n      addCardToList(results.slice((currentPage - 1) * 8, currentPage * 8));\n    })\n    .catch(error => {\n      console.error('Error fetching data:', error);\n    });\n\n  renderPageList(total, currentPage, currentPage);\n}\n"],"names":["pageLinks","headerEl","showCurrentPageFavorites","mobileMenu","checkDate","dumbbellImg","addListenersToRatingModal","exercisesCardList","listWithoutExercases","LOCAL_STORAGE_KEY","energyFlowApiService","EnergyFlowApiSevice","totalFavoritesPages","currentPage","addCardToList","results","cardElement","cardData","imgUrl","capitalizeFirstLetter","cutString","string","onOpenFavorite","id","renderExerciseModal","deleteFavoriteCard","test","e","updateInterfaceAfterRemoval","fetchDataForIds","renderPageList","exerciseIdToRemove","cardToRemove","getFavoriteExerciseIds","storedIds","favoriteExerciseIdInLocalStorage","ids","promises","paginationFavorite","error","showMessageBadRequest","total"],"mappings":"oJAIA,MAAMA,EAAY,SAAS,cAAc,iBAAiB,EACpDC,EAAW,SAAS,cAAc,iBAAiB,EACzDA,EAAS,UAAU,IAAI,0BAA0B,EACjDD,EAAU,UAAU,IAAI,aAAa,EAGrCE,IACAC,IACAC,EAAW,ECZX,MAAeC,EAAA,yDCSfC,IAEA,MAAMC,EAAoB,SAAS,cAAc,iBAAiB,EAC5DC,EAAuB;AAAA;AAAA,iBAEZH,CAAW;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAWtBI,EAAoB,sBACpBC,EAAuB,IAAIC,EACjC,IAAIC,EAAsB,EACtBC,EAAc,EAElB,SAASC,EAAcC,EAAS,CAC9B,MAAMC,EAAcD,EACjB,IACCE,GAAY;AAAA,mCACiBA,EAAS,GAAG;AAAA,gCACfA,EAAS,GAAG;AAAA;AAAA,iBAE3BC,CAAM;AAAA;AAAA,uCAEgBD,EAAS,GAAG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sCAQvCA,EAAS,GACV;AAAA;AAAA,yBAEcC,CAAM;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,yBAMNA,CAAM;AAAA;AAAA,0CAEWC,EAC9BF,EAAS,IACrB,CAAW;AAAA;AAAA;AAAA,6EAICA,EAAS,cACV;AAAA,uEAECA,EAAS,QACV;AAAA,oEACyDG,EACxDH,EAAS,MACrB,CAAW;AAAA;AAAA;AAAA;AAAA,GAKN,EACA,KAAK,EAAE,EAEVV,EAAkB,UAAYS,CAChC,CAEA,SAASG,EAAsBE,EAAQ,CACrC,OAAOA,EAAO,OAAO,CAAC,EAAE,YAAW,EAAKA,EAAO,MAAM,CAAC,CACxD,CAGAd,EAAkB,iBAAiB,QAASe,CAAc,EAE1D,eAAeA,EAAe,EAAG,CAC/B,GAAI,EAAE,OAAO,UAAU,SAAS,YAAY,EAC1C,OAGF,IAAIC,EAAK,EAAE,OAAO,GAElB,MAAMC,EAAoBD,CAAE,EAC5B,SAAS,cAAc,4BAA4B,EAAE,OAAM,EAC3D,SAAS,cAAc,2BAA2B,EAAE,MAAM,MAAQ,MACpE,CAIA,SAASE,EAAmB,EAAG,CAC7B,GAAI,CAAC,EAAE,OAAO,UAAU,SAAS,YAAY,EAC3C,OAGF,IAAIF,EAAK,EAAE,OAAO,WAAW,GAGzBG,EADc,KAAK,MAAM,aAAa,QAAQjB,CAAiB,CAAC,EAC7C,OAAOkB,GAAKA,IAAMJ,CAAE,EAC3C,aAAa,QAAQd,EAAmB,KAAK,UAAUiB,CAAI,CAAC,EAC5Dd,EAAsB,KAAK,KAAKc,EAAK,OAAS,CAAC,EAC/CE,EAA4BL,CAAE,EAG5B,SAAS,iBAAiB,cAAc,EAAE,SAAW,GACrD,KAAK,MAAM,aAAa,QAAQd,CAAiB,CAAC,EAAE,OAAS,GAE7DoB,EAAgBH,CAAI,EAAE,KAAKX,GAAW,CACpC,GAAI,OAAO,WAAa,IAAK,CAC3BF,EAAcA,EAAc,EAC5BC,EAAcC,EAAQ,MAAM,EAAG,CAAC,CAAC,EACjCe,EAAelB,EAAqBC,EAAaA,CAAW,EAC5D,QAAQ,IAAIA,CAAW,EACR,SAAS,iBACtB,8BACV,EAEiBA,EAAc,CAAC,EAAE,UAAU,IAAI,oBAAoB,EAC5D,MACD,CACP,CAAK,CAEL,CAEA,SAASe,EAA4BG,EAAoB,CACvD,MAAMC,EAAe,SAAS,cAC5B,oBAAoBD,CAAkB,IAC1C,EAME,GAJIC,GACFA,EAAa,OAAM,EAGjB,KAAK,MAAM,aAAa,QAAQvB,CAAiB,CAAC,EAAE,SAAW,EAAG,CACpEF,EAAkB,UAAYC,EAC9B,SAAS,cAAc,4BAA4B,EAAE,UAAY,GACjE,MACD,CACH,CACAD,EAAkB,iBAAiB,QAASkB,CAAkB,EAG9D,SAASQ,GAAyB,CAChC,MAAMC,EAAY,aAAa,QAAQzB,CAAiB,EACxD,OAAOyB,EAAY,KAAK,MAAMA,CAAS,EAAI,CAAA,CAC7C,CAGA,MAAMC,EAAmCF,EAAsB,EAEzDJ,EAAkB,MAAMO,GAAO,CACnC,MAAMC,EAAWD,EAAI,IAAIb,GAAMb,EAAqB,oBAAoBa,CAAE,CAAC,EAC3E,OAAO,QAAQ,IAAIc,CAAQ,CAC7B,EAEIF,EAAiC,SAAW,EAC9CN,EAAgBM,CAAgC,EAC7C,KAAKpB,GAAW,CACX,OAAO,WAAa,KACtBD,EAAcC,EAAQ,MAAM,EAAG,CAAC,CAAC,EAEjCH,EAAsB,KAAK,KAAKG,EAAQ,OAAS,CAAC,EAElDe,EAAelB,EAAqBC,EAAaA,CAAW,EAC5D,SACG,cAAc,uBAAuB,EACrC,iBAAiB,SAAUyB,CAAkB,GAEhDxB,EAAcC,CAAO,CAE7B,CAAK,EACA,MAAMwB,GAAS,CACdC,IACA,QAAQ,IAAID,CAAK,CACvB,CAAK,EAEHhC,EAAkB,UAAYC,EAGhC,SAAS8B,EAAmB,EAAG,CAC7B,EAAE,eAAc,EAEhBzB,EAAc,EAAE,UAAU,YAC1B,MAAMuB,EAAM,KAAK,MAAM,aAAa,QAAQ,qBAAqB,CAAC,EAClE,IAAIK,EAAQ,KAAK,KAAKL,EAAI,OAAS,CAAC,EAEpCP,EAAgBM,CAAgC,EAC7C,KAAKpB,GAAW,CACfD,EAAcC,EAAQ,OAAOF,EAAc,GAAK,EAAGA,EAAc,CAAC,CAAC,CACzE,CAAK,EACA,MAAM0B,GAAS,CACd,QAAQ,MAAM,uBAAwBA,CAAK,CACjD,CAAK,EAEHT,EAAeW,EAAO5B,EAAaA,CAAW,CAChD"}