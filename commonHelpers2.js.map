{"version":3,"file":"commonHelpers2.js","sources":["../src/js/favorites.js","../src/js/exercise-card.js"],"sourcesContent":["import { checkDate } from './quote';\nimport { mobileMenu, showCurrentPageFavorites } from './header-modal';\n\n\nconst pageLinks = document.querySelector('.favorites-page');\nconst headerEl = document.querySelector('.header-section');\nheaderEl.classList.add('header-section-favorites')\npageLinks.classList.add('active-page');\n\n\nshowCurrentPageFavorites();\nmobileMenu();\ncheckDate();","import EnergyFlowApiSevice from './api-service';\nimport imgUrl from '../images/sprite.svg';\nimport { renderExerciseModal } from './renderExerciseModal';\nimport { showMessageBadRequest } from './showMessage';\nimport { renderPageList } from './pagination';\nimport { cutString } from './render-exercises';\nimport { addListenersToRatingModal } from './giveRating';\nimport dumbbellImg from '../images/favorites/dumbbell.png';\n\naddListenersToRatingModal();\n// localStorage.clear()\nconst exercisesCardList = document.querySelector('.favorites-list');\nexercisesCardList.innerHTML = `<span class=\"loader\"></span>`;\nconst listWithoutExercases = `<div class=\"favorites-no-results\"><img\n          class=\"favorites-div-without-cards-img\"\n          src=\"${dumbbellImg}\"\n          alt=\"dumbbell\"\n          width=\"85\"\n          height=\"52\"\n        />\n        <p class=\"favorites-div-without-cards-text\">\n          It appears that you haven't added any exercises to your favorites yet.\n          To get started, you can add exercises that you like to your favorites\n          for easier access in the future.\n        </p></div>`;\n\nconst LOCAL_STORAGE_KEY = 'favoriteExerciseInfo';\nconst energyFlowApiService = new EnergyFlowApiSevice();\nlet totalFavoritesPages = 1;\nlet currentPage = 1;\n\nfunction addCardToList(results) {\n  const cardElement = results\n    .map(\n      cardData => `\n    <div class=\"div-with-li\" id=\"${cardData._id}\">\n    <button type=\"button\" id=\"${cardData._id}\" class=\"card-delete\">\n    <svg class=\"trash-icon\" width=\"16\" height=\"16\">\n    <use href=\"${imgUrl}#icon-trash\"></use></svg>\n  </button>\n      <li class=\"exercises-card\" id=\"${cardData._id}\">\n\n        <div class=\"exercises-card-upper-part\">\n          <div class=\"div-rating-or-delete-button\">\n            <div class=\"workout-text\">WORKOUT</div>\n\n          </div>\n          <button type=\"button\" id=\"${\n            cardData._id\n          }\" class=\"card-start\">Start <span>\n            <svg class=\"start-icon\" width=\"14\" height=\"14\">\n            <use href=\"${imgUrl}#icon-right-arrow\"></use></svg>\n          </span></button>\n        </div>\n        <div class=\"exercises-card-midle-part\">\n          <div class=\"exercises-card-midle-part-svg\">\n            <svg class=\"runing-man-icon\" width=\"24\" height=\"24\">\n            <use href=\"${imgUrl}#icon-runing-man\"></use></svg>\n          </div>\n          <p class=\"card-exercise-name\">${capitalizeFirstLetter(\n            cardData.name\n          )}</p>\n        </div>\n        <div class=\"exercises-card-lower-part\">\n          <p>Burned calories: <span class=\"exercises-card-lower-part-span\">${\n            cardData.burnedCalories\n          } / 3 min</span></p>\n          <p>Body part: <span class=\"exercises-card-lower-part-span\">${\n            cardData.bodyPart\n          }</span></p>\n          <p>Target: <span class=\"exercises-card-lower-part-span\">${cutString(\n            cardData.target\n          )}</span></p>\n        </div>\n      </li>\n      </div>\n  `\n    )\n    .join('');\n\n  exercisesCardList.innerHTML = cardElement;\n}\n\nfunction capitalizeFirstLetter(string) {\n  return string.charAt(0).toUpperCase() + string.slice(1);\n}\n// ----------------open modal---------------------------//\n\nexercisesCardList.addEventListener('click', onOpenFavorite);\n\nasync function onOpenFavorite(e) {\n  if (e.target.classList.contains('trash-icon')) {\n    return;\n  }\n\n  let id = e.target.id;\n\n  await renderExerciseModal(id);\n}\n\n// --------------delete button-----------------------//\n\nasync function deleteFavoriteCard(e) {\n  if (!e.target.classList.contains('trash-icon')) {\n    return;\n  }\n\n  let id = e.target.parentNode.id;\n  let deleteObj = await energyFlowApiService.getExerciseInfoById(id);\n\n  let savedIdList = JSON.parse(localStorage.getItem(LOCAL_STORAGE_KEY));\n  let test = savedIdList.filter(e => e._id !== deleteObj._id);\n  localStorage.setItem(LOCAL_STORAGE_KEY, JSON.stringify(test));\n  totalFavoritesPages = Math.ceil(test.length / 8);\n  updateInterfaceAfterRemoval(id);\n\n  if (\n    document.querySelectorAll('.div-with-li').length === 0 &&\n    JSON.parse(localStorage.getItem(LOCAL_STORAGE_KEY)).length > 0\n  ) {\n    const localStorageInfo = localStorage.getItem(LOCAL_STORAGE_KEY);\n    if (window.innerWidth < 768) {\n      currentPage = currentPage - 1;\n      addCardToList(test.slice(0, 8));\n      if (currentPage > 1) {\n        renderPageList(totalFavoritesPages, currentPage, currentPage);\n        let pageList = document.querySelectorAll(\n          '.exercises-navigation-number'\n        );\n\n        pageList[currentPage - 1].classList.add('pagination-current');\n        return;\n      } else {\n        document.querySelector('.exercises-navigation-list').innerHTML = '';\n      }\n    }\n  }\n}\n\nfunction updateInterfaceAfterRemoval(exerciseIdToRemove) {\n  const cardToRemove = document.querySelector(\n    `.div-with-li[id=\"${exerciseIdToRemove}\"]`\n  );\n\n  if (cardToRemove) {\n    cardToRemove.remove();\n  }\n\n  if (JSON.parse(localStorage.getItem(LOCAL_STORAGE_KEY)).length === 0) {\n    exercisesCardList.innerHTML = listWithoutExercases;\n    document.querySelector('.exercises-navigation-list').innerHTML = '';\n    return;\n  }\n}\nexercisesCardList.addEventListener('click', deleteFavoriteCard);\n//--------------------- add to favorites---------------------------\n\nfunction getFavoriteExerciseIds() {\n  const storedIds = localStorage.getItem(LOCAL_STORAGE_KEY);\n  return storedIds ? JSON.parse(storedIds) : [];\n}\n\n// -------------------------Завантаження з улюблених-----------------------------------\nconst favoriteExerciseIdInLocalStorage = getFavoriteExerciseIds();\n\nif (favoriteExerciseIdInLocalStorage.length !== 0) {\n  if (window.innerWidth < 768) {\n    addCardToList(favoriteExerciseIdInLocalStorage.slice(0, 8));\n\n    totalFavoritesPages = Math.ceil(\n      favoriteExerciseIdInLocalStorage.length / 8\n    );\n    if (totalFavoritesPages > 1) {\n      renderPageList(totalFavoritesPages, currentPage, currentPage);\n    }\n    document\n      .querySelector('.navigation-list-form')\n      .addEventListener('submit', paginationFavorite);\n  } else {\n    addCardToList(favoriteExerciseIdInLocalStorage);\n  }\n} else {\n  exercisesCardList.innerHTML = listWithoutExercases;\n}\n\nfunction paginationFavorite(e) {\n  e.preventDefault();\n\n  currentPage = e.submitter.textContent;\n  const ids = JSON.parse(localStorage.getItem(LOCAL_STORAGE_KEY));\n  let total = Math.ceil(ids.length / 8);\n\n  addCardToList(ids.slice((currentPage - 1) * 8, currentPage * 8));\n\n  if (total > 1) {\n    renderPageList(total, currentPage, currentPage);\n  }\n}\n"],"names":["pageLinks","headerEl","showCurrentPageFavorites","mobileMenu","checkDate","addListenersToRatingModal","exercisesCardList","listWithoutExercases","dumbbellImg","LOCAL_STORAGE_KEY","energyFlowApiService","EnergyFlowApiSevice","totalFavoritesPages","currentPage","addCardToList","results","cardElement","cardData","imgUrl","capitalizeFirstLetter","cutString","string","onOpenFavorite","id","renderExerciseModal","deleteFavoriteCard","deleteObj","test","e","updateInterfaceAfterRemoval","renderPageList","exerciseIdToRemove","cardToRemove","getFavoriteExerciseIds","storedIds","favoriteExerciseIdInLocalStorage","paginationFavorite","ids","total"],"mappings":"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"}