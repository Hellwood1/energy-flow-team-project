{"version":3,"file":"commonHelpers2.js","sources":["../src/js/favorites.js","../src/js/exercise-card.js"],"sourcesContent":["\n\nconst pageLinks = document.querySelector('.favorites-page');\nconst headerEl = document.querySelector('.header-section');\nheaderEl.classList.add('header-section-favorites')\npageLinks.classList.add('active-page');\n\n\nimport { checkDate } from './quote';\n\ncheckDate();\n","import EnergyFlowApiSevice from './api-service';\nimport imgUrl from '../images/sprite.svg';\nimport { exerciseCardMarkup } from './markup';\nimport { renderExerciseModal } from './renderExerciseModal';\n\nconst exercisesCardList = document.querySelector('.favorites-list');\nconst listWithoutExercases = document.querySelector(\n  '.favorites-div-without-cards '\n);\nconst exercisesCard = document.querySelector('.exercises-card');\nconst LOCAL_STORAGE_KEY = 'favoriteExerciseIds';\nconst energyFlowApiService = new EnergyFlowApiSevice();\n// localStorage.clear()\n\nfunction addCardToList(results) {\n  console.log(results);\n  const cardElement = results\n    .map(\n      cardData => `\n\n      <li class=\"exercises-card\" id=\"${cardData._id}\">\n        <div class=\"exercises-card-upper-part\">\n          <div class=\"div-rating-or-delete-button\">\n            <div class=\"workout-text\">WORKOUT</div>\n            <div class=\"card-rating\">${cardData.rating.toFixed(1)} <span>\n              <svg class=\"rating-icon\" width=\"18\" height=\"18\">\n\n              <use href=\"${imgUrl}#icon-star\"></use></svg>\n\n            </span></div>\n            <button type=\"button\" id=\"${cardData._id}\" class=\"card-delete\">\n              <svg class=\"trash-icon\" width=\"16\" height=\"16\">\n\n              <use href=\"${imgUrl}#icon-trash\"></use></svg>\n\n            </button>\n          </div>\n          <button type=\"button\" class=\"card-start\">Start <span>\n            <svg class=\"start-icon\" width=\"14\" height=\"14\">\n\n            <use href=\"${imgUrl}#icon-right-arrow\"></use></svg>\n\n          </span></button>\n        </div>\n        <div class=\"exercises-card-midle-part\">\n          <div class=\"exercises-card-midle-part-svg\">\n            <svg class=\"runing-man-icon\" width=\"24\" height=\"24\">\n\n            <use href=\"${imgUrl}#icon-runing-man\"></use></svg>\n\n          </div>\n          <p class=\"card-exercise-name\">${capitalizeFirstLetter(\n            cardData.name\n          )}</p>\n        </div>\n        <div class=\"exercises-card-lower-part\">\n          <p>Burned calories: <span class=\"exercises-card-lower-part-span\">${\n            cardData.burnedCalories\n          } / 3 min</span></p>\n          <p>Body part: <span class=\"exercises-card-lower-part-span\">${\n            cardData.bodyPart\n          }</span></p>\n          <p>Target: <span class=\"exercises-card-lower-part-span\">${\n            cardData.target\n          }</span></p>\n        </div>\n      </li>\n  `\n    )\n    .join('');\n\n  exercisesCardList.insertAdjacentHTML('beforeend', cardElement);\n  deleteButtonEventListener();\n}\n\nfunction capitalizeFirstLetter(string) {\n  return string.charAt(0).toUpperCase() + string.slice(1);\n}\n\n// --------------delete button-----------------------//\n\nfunction deleteButtonEventListener() {\n  const removeFromFavoritesButtons = document.querySelectorAll('.card-delete');\n  console.log(removeFromFavoritesButtons);\n  removeFromFavoritesButtons.forEach(button =>\n    deleteButtonAddEventListener(button)\n  );\n}\n\nfunction deleteButtonAddEventListener(button) {\n  console.log(button);\n\n  button.addEventListener('click', function () {\n    const exerciseIdToRemove = this.id;\n    console.log(exerciseIdToRemove);\n\n    const favoriteExerciseIds = getFavoriteExerciseIds();\n    let newFavoriteExerciseIds = favoriteExerciseIds.filter(\n      element => element !== exerciseIdToRemove\n    );\n    localStorage.setItem(\n      LOCAL_STORAGE_KEY,\n      JSON.stringify(newFavoriteExerciseIds)\n    );\n\n    updateInterfaceAfterRemoval(exerciseIdToRemove);\n  });\n}\n\nfunction updateInterfaceAfterRemoval(exerciseIdToRemove) {\n  const cardToRemove = document.querySelector(\n    `.exercises-card[id=\"${exerciseIdToRemove}\"]`\n  );\n\n  if (cardToRemove) {\n    cardToRemove.remove();\n  }\n}\n\n//--------------------- add to favorites---------------------------\n\nfunction getFavoriteExerciseIds() {\n  const storedIds = localStorage.getItem(LOCAL_STORAGE_KEY);\n  return storedIds ? JSON.parse(storedIds) : [];\n}\n\n// -------------------------Завантаження з улюблених-----------------------------------\nconst favoriteExerciseIdInLocalStorage = getFavoriteExerciseIds();\n\nconst fetchDataForIds = async ids => {\n  const promises = ids.map(id => energyFlowApiService.getExerciseInfoById(id));\n  return Promise.all(promises);\n};\n\nif (favoriteExerciseIdInLocalStorage.length !== 0) {\n  listWithoutExercases.classList.add('favorites-div-without-cards-hidden');\n  fetchDataForIds(favoriteExerciseIdInLocalStorage)\n    .then(results => {\n\n      if (window.innerWidth < 768) {\n        addCardToList(results.slice(0, 8));\n        totalFavoritesPages = Math.ceil(results.length / 8);\n        renderPageList(totalFavoritesPages, currentPage, currentPage);\n        document\n          .querySelector('.navigation-list-form')\n          .addEventListener('submit', paginationFavorite);\n      } else {\n        addCardToList(results);\n      }\n\n    })\n    .catch(error => {\n      console.error('Error fetching data:', error);\n    });\n} else {\n  listWithoutExercases.classList.remove('favorites-div-without-cards-hidden');\n}\n\nfunction paginationFavorite(e) {\n  e.preventDefault();\n\n  currentPage = e.submitter.textContent;\n  const ids = JSON.parse(localStorage.getItem('favoriteExerciseIds'));\n  let total = Math.ceil(ids.length / 8);\n\n  fetchDataForIds(favoriteExerciseIdInLocalStorage)\n    .then(results => {\n      addCardToList(results.slice((currentPage - 1) * 8, currentPage * 8));\n    })\n    .catch(error => {\n      console.error('Error fetching data:', error);\n    });\n\n  renderPageList(total, currentPage, currentPage);\n}\n\n"],"names":["pageLinks","headerEl","checkDate","exercisesCardList","listWithoutExercases","LOCAL_STORAGE_KEY","energyFlowApiService","EnergyFlowApiSevice","addCardToList","results","cardElement","cardData","imgUrl","capitalizeFirstLetter","deleteButtonEventListener","string","removeFromFavoritesButtons","button","deleteButtonAddEventListener","exerciseIdToRemove","newFavoriteExerciseIds","getFavoriteExerciseIds","element","updateInterfaceAfterRemoval","cardToRemove","storedIds","favoriteExerciseIdInLocalStorage","fetchDataForIds","ids","promises","id","paginationFavorite","error","total"],"mappings":"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"}