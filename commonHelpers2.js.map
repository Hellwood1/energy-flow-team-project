{"version":3,"file":"commonHelpers2.js","sources":["../src/js/favorites.js","../src/js/exercise-card.js"],"sourcesContent":["import { checkDate } from './quote';\nimport { mobileMenu, showCurrentPageFavorites } from './header-modal';\n\nconst pageLinks = document.querySelector('.favorites-page');\nconst headerEl = document.querySelector('.header-section');\nheaderEl.classList.add('header-section-favorites')\npageLinks.classList.add('active-page');\n\n\nshowCurrentPageFavorites();\nmobileMenu();\ncheckDate();\n","import EnergyFlowApiSevice from './api-service';\nimport imgUrl from '../images/sprite.svg';\nimport { renderExerciseModal } from \"./renderExerciseModal\";\nimport { showMessageBadRequest } from \"./showMessage\"\n\nconst exercisesCardList = document.querySelector(\".favorites-list\");\nconst listWithoutExercases = document.querySelector(\".favorites-div-without-cards \");\nconst LOCAL_STORAGE_KEY = \"favoriteExerciseIds\";\nconst energyFlowApiService = new EnergyFlowApiSevice();\nconst totalFavoritesPages = 1;\n\n\n  function addCardToList(results) {\n\n    const cardElement = results.map((cardData) => `\n    <div class=\"div-with-li\" id=\"${cardData._id}\">\n    <button type=\"button\" id=\"${cardData._id}\" class=\"card-delete\">\n    <svg class=\"trash-icon\" width=\"16\" height=\"16\">\n    <use href=\"${imgUrl}#icon-trash\"></use></svg>\n  </button>\n      <li class=\"exercises-card\" id=\"${cardData._id}\">\n\n        <div class=\"exercises-card-upper-part\">\n          <div class=\"div-rating-or-delete-button\">\n            <div class=\"workout-text\">WORKOUT</div>\n\n          </div>\n          <button type=\"button\" id=\"${cardData._id}\" class=\"card-start\">Start <span>\n            <svg class=\"start-icon\" width=\"14\" height=\"14\">\n            <use href=\"${imgUrl}#icon-right-arrow\"></use></svg>\n          </span></button>\n        </div>\n        <div class=\"exercises-card-midle-part\">\n          <div class=\"exercises-card-midle-part-svg\">\n            <svg class=\"runing-man-icon\" width=\"24\" height=\"24\">\n            <use href=\"${imgUrl}#icon-runing-man\"></use></svg>\n          </div>\n          <p class=\"card-exercise-name\">${capitalizeFirstLetter(\n            cardData.name\n          )}</p>\n        </div>\n        <div class=\"exercises-card-lower-part\">\n          <p>Burned calories: <span class=\"exercises-card-lower-part-span\">${\n            cardData.burnedCalories\n          } / 3 min</span></p>\n          <p>Body part: <span class=\"exercises-card-lower-part-span\">${\n            cardData.bodyPart\n          }</span></p>\n          <p>Target: <span class=\"exercises-card-lower-part-span\">${\n            cardData.target\n          }</span></p>\n        </div>\n      </li>\n      </div>\n  `\n    )\n    .join('');\n\n  exercisesCardList.insertAdjacentHTML('beforeend', cardElement);\n\n  startButtonAddEventListener();\n  deleteButtonAddEventListener();\n}\n\nfunction capitalizeFirstLetter(string) {\n  return string.charAt(0).toUpperCase() + string.slice(1);\n}\n// ----------------start button---------------------------\n\nfunction startButtonAddEventListener() {\n  const removeFromFavoritesButtons = document.querySelectorAll(\".exercises-card\");\n  removeFromFavoritesButtons.forEach(start => start.addEventListener(\"click\", e => {\n    const id = e.target.id;\n   renderExerciseModal(id);\n })\n)}\n\n// --------------delete button-----------------------//\n\nfunction deleteButtonAddEventListener() {\n  const removeFromFavoritesButtons = document.querySelectorAll(\".card-delete\");\n  removeFromFavoritesButtons.forEach(deleteButtonEventListener);\n}\n\nfunction deleteButtonEventListener(button) {\n  button.addEventListener(\"click\", (event) => {\n    const exerciseIdToRemove = event.currentTarget.id;\n\n    const favoriteExerciseIds = getFavoriteExerciseIds();\n    let newFavoriteExerciseIds = favoriteExerciseIds.filter(element => element !== exerciseIdToRemove);\n    localStorage.setItem(LOCAL_STORAGE_KEY, JSON.stringify(newFavoriteExerciseIds));\n\n    updateInterfaceAfterRemoval(exerciseIdToRemove);\n  });\n}\n\nfunction updateInterfaceAfterRemoval(exerciseIdToRemove) {\n  const cardToRemove = document.querySelector(`.div-with-li[id=\"${exerciseIdToRemove}\"]`);\n\n  if (cardToRemove) {\n    cardToRemove.remove();\n  }\n\n  const hasChildrenWithClass = exercisesCardList.querySelector('.div-with-li') === null;\n  if (!hasChildrenWithClass) {\n    listWithoutExercases.classList.remove(\"favorites-div-without-cards-hidden\");\n  }\n}\n\n//--------------------- add to favorites---------------------------\n\nfunction getFavoriteExerciseIds() {\n  const storedIds = localStorage.getItem(LOCAL_STORAGE_KEY);\n  return storedIds ? JSON.parse(storedIds) : [];\n}\n\n// -------------------------Завантаження з улюблених-----------------------------------\nconst favoriteExerciseIdInLocalStorage = getFavoriteExerciseIds();\n\nconst fetchDataForIds = async (ids) => {\n  const promises = ids.map((id) => energyFlowApiService.getExerciseInfoById(id));\n  return Promise.all(promises);\n};\n\nif (favoriteExerciseIdInLocalStorage.length !== 0) {\n  listWithoutExercases.classList.add(\"favorites-div-without-cards-hidden\");\n  fetchDataForIds(favoriteExerciseIdInLocalStorage)\n    .then(results => {\n\n      if (window.innerWidth < 768) {\n        addCardToList(results.slice(0, 8));\n        totalFavoritesPages = Math.ceil(results.length / 8);\n        renderPageList(totalFavoritesPages, currentPage, currentPage);\n        document\n          .querySelector('.navigation-list-form')\n          .addEventListener('submit', paginationFavorite);\n      } else {\n        addCardToList(results);\n      }\n\n    })\n    .catch(error => {\n      showMessageBadRequest();\n    });\n\n} else {\n  listWithoutExercases.classList.remove(\"favorites-div-without-cards-hidden\");\n}\n\nfunction paginationFavorite(e) {\n  e.preventDefault();\n\n  currentPage = e.submitter.textContent;\n  const ids = JSON.parse(localStorage.getItem('favoriteExerciseIds'));\n  let total = Math.ceil(ids.length / 8);\n\n  fetchDataForIds(favoriteExerciseIdInLocalStorage)\n    .then(results => {\n      addCardToList(results.slice((currentPage - 1) * 8, currentPage * 8));\n    })\n    .catch(error => {\n      console.error('Error fetching data:', error);\n    });\n\n  renderPageList(total, currentPage, currentPage);\n}\n\n\n"],"names":["pageLinks","headerEl","showCurrentPageFavorites","mobileMenu","checkDate","exercisesCardList","listWithoutExercases","LOCAL_STORAGE_KEY","energyFlowApiService","EnergyFlowApiSevice","totalFavoritesPages","addCardToList","results","cardElement","cardData","imgUrl","capitalizeFirstLetter","startButtonAddEventListener","deleteButtonAddEventListener","string","start","e","id","renderExerciseModal","deleteButtonEventListener","button","event","exerciseIdToRemove","newFavoriteExerciseIds","getFavoriteExerciseIds","element","updateInterfaceAfterRemoval","cardToRemove","storedIds","favoriteExerciseIdInLocalStorage","fetchDataForIds","ids","promises","paginationFavorite","error","showMessageBadRequest","total"],"mappings":"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"}