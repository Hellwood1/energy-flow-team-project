{"version":3,"file":"commonHelpers2.js","sources":["../src/js/favorites.js","../src/js/exercise-card.js"],"sourcesContent":["import { checkDate } from './quote';\nimport { mobileMenu, showCurrentPageFavorites } from './header-modal';\n\n\nconst pageLinks = document.querySelector('.favorites-page');\nconst headerEl = document.querySelector('.header-section');\nheaderEl.classList.add('header-section-favorites')\npageLinks.classList.add('active-page');\n\n\nshowCurrentPageFavorites();\nmobileMenu();\ncheckDate();","import EnergyFlowApiSevice from './api-service';\nimport imgUrl from '../images/sprite.svg';\nimport { renderExerciseModal } from './renderExerciseModal';\nimport { showMessageBadRequest } from './showMessage';\nimport { renderPageList } from './pagination';\n\nconst exercisesCardList = document.querySelector('.favorites-list');\nconst listWithoutExercases = document.querySelector(\n  '.favorites-div-without-cards '\n);\nconst LOCAL_STORAGE_KEY = 'favoriteExerciseIds';\nconst energyFlowApiService = new EnergyFlowApiSevice();\nlet totalFavoritesPages = 1;\nlet currentPage = 1;\n\nfunction addCardToList(results) {\n  const cardElement = results\n    .map(\n      cardData => `\n    <div class=\"div-with-li\" id=\"${cardData._id}\">\n    <button type=\"button\" id=\"${cardData._id}\" class=\"card-delete\">\n    <svg class=\"trash-icon\" width=\"16\" height=\"16\">\n    <use href=\"${imgUrl}#icon-trash\"></use></svg>\n  </button>\n      <li class=\"exercises-card\" id=\"${cardData._id}\">\n\n        <div class=\"exercises-card-upper-part\">\n          <div class=\"div-rating-or-delete-button\">\n            <div class=\"workout-text\">WORKOUT</div>\n\n          </div>\n          <button type=\"button\" id=\"${\n            cardData._id\n          }\" class=\"card-start\">Start <span>\n            <svg class=\"start-icon\" width=\"14\" height=\"14\">\n            <use href=\"${imgUrl}#icon-right-arrow\"></use></svg>\n          </span></button>\n        </div>\n        <div class=\"exercises-card-midle-part\">\n          <div class=\"exercises-card-midle-part-svg\">\n            <svg class=\"runing-man-icon\" width=\"24\" height=\"24\">\n            <use href=\"${imgUrl}#icon-runing-man\"></use></svg>\n          </div>\n          <p class=\"card-exercise-name\">${capitalizeFirstLetter(\n            cardData.name\n          )}</p>\n        </div>\n        <div class=\"exercises-card-lower-part\">\n          <p>Burned calories: <span class=\"exercises-card-lower-part-span\">${\n            cardData.burnedCalories\n          } / 3 min</span></p>\n          <p>Body part: <span class=\"exercises-card-lower-part-span\">${\n            cardData.bodyPart\n          }</span></p>\n          <p>Target: <span class=\"exercises-card-lower-part-span\">${\n            cardData.target\n          }</span></p>\n        </div>\n      </li>\n      </div>\n  `\n    )\n    .join('');\n\n  exercisesCardList.innerHTML = cardElement;\n\n  startButtonAddEventListener();\n\n  // deleteButtonAddEventListener();\n}\n\nfunction capitalizeFirstLetter(string) {\n  return string.charAt(0).toUpperCase() + string.slice(1);\n}\n// ----------------start button---------------------------\n\nfunction startButtonAddEventListener() {\n  const removeFromFavoritesButtons =\n    document.querySelectorAll('.exercises-card');\n  removeFromFavoritesButtons.forEach(start =>\n    start.addEventListener('click', e => {\n      const id = e.target.id;\n      renderExerciseModal(id);\n    })\n  );\n}\n\n// --------------delete button-----------------------//\n\nfunction deleteFavoriteCard(e) {\n  if (!e.target.classList.contains('trash-icon')) {\n    return;\n  }\n\n  let id = e.target.parentNode.id;\n\n  let savedIdList = JSON.parse(localStorage.getItem(LOCAL_STORAGE_KEY));\n  let test = savedIdList.filter(e => e !== id);\n  localStorage.setItem(LOCAL_STORAGE_KEY, JSON.stringify(test));\n  totalFavoritesPages = Math.ceil(test.length / 8);\n  updateInterfaceAfterRemoval(id);\n\n  if (\n    document.querySelectorAll('.div-with-li').length === 0 &&\n    JSON.parse(localStorage.getItem(LOCAL_STORAGE_KEY)).length > 0\n  ) {\n    fetchDataForIds(test).then(results => {\n      if (window.innerWidth < 768) {\n        console.log('noooooooo');\n        currentPage = currentPage - 1;\n        addCardToList(results.slice(0, 8));\n        renderPageList(totalFavoritesPages, currentPage, currentPage);\n        console.log(currentPage);\n        let pageList = document.querySelectorAll(\n          '.exercises-navigation-number'\n        );\n\n        pageList[currentPage - 1].classList.add('pagination-current');\n        return;\n      }\n    });\n  }\n}\n\nfunction updateInterfaceAfterRemoval(exerciseIdToRemove) {\n  const cardToRemove = document.querySelector(\n    `.div-with-li[id=\"${exerciseIdToRemove}\"]`\n  );\n\n  if (cardToRemove) {\n    cardToRemove.remove();\n  }\n\n  if (JSON.parse(localStorage.getItem(LOCAL_STORAGE_KEY)).length === 0) {\n    listWithoutExercases.classList.remove('favorites-div-without-cards-hidden');\n    document.querySelector('.exercises-navigation-list').innerHTML = '';\n    return;\n  }\n}\nexercisesCardList.addEventListener('click', deleteFavoriteCard);\n//--------------------- add to favorites---------------------------\n\nfunction getFavoriteExerciseIds() {\n  const storedIds = localStorage.getItem(LOCAL_STORAGE_KEY);\n  return storedIds ? JSON.parse(storedIds) : [];\n}\n\n// -------------------------Завантаження з улюблених-----------------------------------\nconst favoriteExerciseIdInLocalStorage = getFavoriteExerciseIds();\n\nconst fetchDataForIds = async ids => {\n  const promises = ids.map(id => energyFlowApiService.getExerciseInfoById(id));\n  return Promise.all(promises);\n};\n\nif (favoriteExerciseIdInLocalStorage.length !== 0) {\n  listWithoutExercases.classList.add('favorites-div-without-cards-hidden');\n  fetchDataForIds(favoriteExerciseIdInLocalStorage)\n    .then(results => {\n      if (window.innerWidth < 768) {\n        addCardToList(results.slice(0, 8));\n\n        totalFavoritesPages = Math.ceil(results.length / 8);\n        // console.log(totalFavoritesPages);\n        renderPageList(totalFavoritesPages, currentPage, currentPage);\n        document\n          .querySelector('.navigation-list-form')\n          .addEventListener('submit', paginationFavorite);\n      } else {\n        addCardToList(results);\n      }\n    })\n    .catch(error => {\n      showMessageBadRequest();\n      console.log(error);\n    });\n} else {\n  listWithoutExercases.classList.remove('favorites-div-without-cards-hidden');\n}\n\nfunction paginationFavorite(e) {\n  e.preventDefault();\n\n  currentPage = e.submitter.textContent;\n  const ids = JSON.parse(localStorage.getItem('favoriteExerciseIds'));\n  let total = Math.ceil(ids.length / 8);\n\n  fetchDataForIds(favoriteExerciseIdInLocalStorage)\n    .then(results => {\n      addCardToList(results.slice((currentPage - 1) * 8, currentPage * 8));\n    })\n    .catch(error => {\n      console.error('Error fetching data:', error);\n    });\n\n  renderPageList(total, currentPage, currentPage);\n}\n"],"names":["pageLinks","headerEl","showCurrentPageFavorites","mobileMenu","checkDate","exercisesCardList","listWithoutExercases","LOCAL_STORAGE_KEY","energyFlowApiService","EnergyFlowApiSevice","totalFavoritesPages","currentPage","addCardToList","results","cardElement","cardData","imgUrl","capitalizeFirstLetter","startButtonAddEventListener","string","start","e","id","renderExerciseModal","deleteFavoriteCard","test","updateInterfaceAfterRemoval","fetchDataForIds","renderPageList","exerciseIdToRemove","cardToRemove","getFavoriteExerciseIds","storedIds","favoriteExerciseIdInLocalStorage","ids","promises","paginationFavorite","error","showMessageBadRequest","total"],"mappings":"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"}